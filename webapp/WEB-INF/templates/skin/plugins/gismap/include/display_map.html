<#macro displayMap gismap_code="" mapName="carte">
<div id="${mapName}" class="map" style="display: none">
</div>
<link rel="stylesheet" type="text/css" href="js/plugins/gismap/openlayers/Legend.css" />
<link rel="stylesheet" type="text/css" href="js/plugins/gismap/openlayers/LayerSearchPanel.css" />
<link rel="stylesheet" type="text/css" href="js/plugins/gismap/openlayers/GeolocalizationPanel.css" />

<script type="text/javascript">

function showMap(gismapCode, mapName) {
	$(document).ready(function() {
		
	var baseUrl = $('base').attr('href');
		$LAB
			.script(baseUrl +"js/plugins/gismap/openlayers/OpenLayers.js").wait()
			.script(baseUrl +"js/plugins/gismap/openlayers/CustomLayerSwitcher.js").wait()
			.script(baseUrl +"js/plugins/gismap/openlayers/Legend.js").wait()
			.script(baseUrl +"js/plugins/gismap/openlayers/LayerSearchPanel.js").wait()
			.script(baseUrl +"js/plugins/gismap/openlayers/GeolocalizationPanel.js").wait()
			.script(baseUrl +"js/plugins/gismap/gismap.js").wait()
			.wait(function(){
				$.get(baseUrl +'/jsp/site/plugins/gismap/DoDisplayMap.jsp?map_name='+mapName+'&gismap_code='+gismapCode, function(data) {
					$('#'+mapName).html(data);
					$('#'+mapName).show();
				});
			});
	});
}
 
</script>
</#macro>