<script>
<#assign idEntry = "">
<#if entry?? && entry.idEntry?has_content >
	<#assign idEntry = entry.idEntry >
</#if>
var idMap${idEntry} = '${idEntry}_map';
var globalParameters${idEntry} = [];
var parameters${idEntry} = [];
var fieldParameters${idEntry} = [];
ol.proj.setProj4(proj4);

<#list map_parameter.parameters?keys as key>
	<#assign strKey = "'" + key + "'">
	<#assign strVal = map_parameter.parameters[key] >
	parameters${idEntry}.push(parameters${idEntry}[${strKey}] = ${strVal});
</#list>

<#if fieldParam?? >
<#list fieldParam?keys as key>
	<#assign strKey = "'" + key + "'" >
	<#assign strVal = "'" + fieldParam[key] + "'" >
	<#if strKey == "'UrlGeoJSON1'">
		fieldParameters${idEntry}.push(fieldParameters${idEntry}[${strKey}] = ['Lutece',${strVal}]);
	<#else>
		fieldParameters${idEntry}.push(fieldParameters${idEntry}[${strKey}] = ${strVal});
	</#if>
	
</#list>
<#else>
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['TypeEdit']='');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomGeoJson']='GeomGeoJson');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomCentroidXStockage']='GeomCentroidXStockage');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomCentroidYStockage']='GeomCentroidYStockage');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomCentroidXGeocodage']='GeomCentroidXGeocodage');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomCentroidYGeocodage']='GeomCentroidYGeocodage');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['GeomState']='GeomState');
	fieldParameters${idEntry}.push(fieldParameters${idEntry}['UrlGeoJSON1']=['Test','http://localhost:8081/myapp/myresource']);
</#if>

var GisMapDisplay${idEntry} = new GisMap(idMap${idEntry}, ${idEntry});
GisMapDisplay${idEntry}.initGisMap(globalParameters${idEntry}, parameters${idEntry}, fieldParameters${idEntry});

</script>